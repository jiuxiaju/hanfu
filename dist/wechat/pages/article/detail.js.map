{"version":3,"file":"pages/article/detail.js","mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./pages/article/detail.ts"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { aPage } from '@ali/mor-core';\nimport { get } from '../../services';\n// 获取全局 app 实例\nvar app = getApp();\naPage({\n    data: {\n        headline: '',\n        article: '',\n        errConfig: {},\n        read_count: 0,\n    },\n    onLoad: function (options) {\n        var articleId = options.articleId;\n        if (articleId) {\n            this.articleId = articleId;\n            this.getArticleDetail();\n        }\n    },\n    //分享给好友\n    onShareAppMessage: function () {\n        var app = getApp(); // 获取全局应用实例\n        var promise = new Promise(function (resolve) {\n            app.generateShareInfo().then(function (shareInfo) {\n                // 在这里处理生成的分享信息\n                resolve(shareInfo);\n            });\n        });\n        return {\n            title: '九霞裾',\n            path: '/pages/home',\n            promise: promise\n        };\n    },\n    //转发到朋友圈\n    onShareTimeline: function () {\n        return {\n            title: '快来看看'\n        };\n    },\n    getArticleDetail: function () {\n        var _this = this;\n        get('/article/detail', { articleId: this.articleId }).then(function (res) {\n            var _a = res.data, data = _a === void 0 ? {} : _a, success = res.success;\n            var headline = data.headline, article = data.article, remainData = __rest(data, [\"headline\", \"article\"]);\n            if (success && article) {\n                _this.setData(__assign(__assign({ headline: headline, article: app.convertRichText(article) }, remainData), { errConfig: {} }));\n                _this.updateArticleCReadNum();\n            }\n            else {\n                var errConfig = {\n                    errType: 1,\n                };\n                _this.setData({\n                    errConfig: errConfig,\n                });\n            }\n        });\n    },\n    onRefresh: function () {\n        console.log('##### onrefresh');\n        this.getArticleDetail();\n    },\n    /**\n     * 更新阅读量\n     * @param articleId\n     */\n    updateArticleCReadNum: function () {\n        get('/article/updateArticleCReadNum', { articleId: this.articleId });\n    },\n});\n"],"names":[],"sourceRoot":""}