{"version":3,"file":"pages/menu/index.js","mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./pages/menu/index.ts"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { aComponent } from '@ali/mor-core';\nimport area from '/assets/area';\naComponent({\n    properties: {\n        currentTab: {\n            type: Number,\n            value: 0,\n        },\n        menuData: {\n            type: Array,\n            value: []\n        }\n    },\n    data: {\n        actypeList: [],\n        sourceOptions: [\n            {\n                value: '淘宝',\n                label: '淘宝',\n            },\n            {\n                value: '拼多多',\n                label: '拼多多',\n            },\n        ],\n        statusList: [\n            {\n                value: '',\n                label: '所有状态',\n            },\n            {\n                value: '未开始',\n                label: '未开始',\n            },\n            {\n                value: '进行中',\n                label: '进行中',\n            },\n            {\n                value: '已结束',\n                label: '已结束',\n            },\n        ],\n        provinceList: [],\n        filter: {},\n        value: ['0', '0-0'],\n        infoList: [],\n        area: ['', ''],\n        source: [],\n        styleOptions: [\n            {\n                value: '衣裳',\n                label: '衣裳'\n            },\n            {\n                value: '襦裙',\n                label: '襦裙'\n            }\n        ],\n        sizeOptions: [\n            {\n                value: 'xs',\n                label: 'xs'\n            },\n            {\n                value: 's',\n                label: 's'\n            },\n        ],\n        deliveryTimeOptions: [\n            {\n                value: '1天',\n                label: '1天'\n            },\n            {\n                value: '3天',\n                label: '3天'\n            },\n        ],\n        dynastyOptions: [\n            {\n                value: '战国',\n                label: '战国'\n            },\n            {\n                value: '汉',\n                label: '汉'\n            },\n            {\n                value: '明',\n                label: '明'\n            }\n        ],\n        tagsOptions: [\n            {\n                value: '妆造',\n                label: '妆造'\n            },\n            {\n                value: '摄影',\n                label: '摄影'\n            }\n        ],\n        style: [],\n        size: [],\n        dynasty: [],\n        actype: [],\n        deliveryTime: [],\n        tags: [],\n        sourceLabel: '店铺来源',\n        styleLabel: '形制',\n        sizeLabel: '尺码',\n        deliveryTimeLabel: '发货时间',\n        dynastyLabel: '朝代',\n        tagsLabel: '标签',\n        areaLabel: '地区选择',\n        actypeLabel: '活动类型',\n        tabPanelstyle: 'display:flex;justify-content:center;align-items:center;',\n        previousTab: '',\n        previousMenuData: []\n    },\n    attached: function () {\n        this.getArea();\n    },\n    observers: {\n        // 关注 currentTab 的变化\n        'currentTab': function (newVal) {\n            if (newVal !== this.data.previousTab) {\n                this.setData({ previousTab: newVal }); // 更新 previousTab 为当前 newVal\n                this.clearFilter(); // 清空筛选条件\n            }\n        },\n        'menuData': function (newData) {\n            if (newData !== this.data.previousMenuData) {\n                this.setData({ previousMenuData: newData }); // 更新 previousTab 为当前 newVal\n                this.processFilterData(newData);\n            }\n        }\n    },\n    methods: {\n        onClick: function () {\n        },\n        processFilterData: function (menuData) {\n            var deliveryTime = menuData.find(function (item) { return item.label === 'deliveryTime'; });\n            var dynasty = menuData.find(function (item) { return item.label === 'dynasty'; });\n            var actype = menuData.find(function (item) { return item.label === 'actype'; });\n            var tags = menuData.find(function (item) { return item.label === 'tags'; });\n            var style = menuData.find(function (item) { return item.label === 'style'; });\n            var size = menuData.find(function (item) { return item.label === 'size'; });\n            var source = menuData.find(function (item) { return item.label === 'source'; });\n            this.setData({\n                deliveryTimeOptions: deliveryTime ? deliveryTime.values : [],\n                dynastyOptions: dynasty ? dynasty.values : [],\n                actypeList: actype ? actype.values : [],\n                tagsOptions: tags ? tags.values : [],\n                sizeOptions: size ? size.values : [],\n                styleOptions: style ? style.values : [],\n                sourceOptions: source ? source.values : [],\n            });\n        },\n        clearFilter: function () {\n            // 清空 filter\n            this.setData({\n                filter: {},\n                style: [],\n                styleLabel: '形制',\n                size: [],\n                sizeLabel: '尺码',\n                dynasty: [],\n                dynastyLabel: '朝代',\n                deliveryTime: [],\n                deliveryTimeLabel: '发货时间',\n                tags: [],\n                tagsLabel: '标签',\n                source: [],\n                sourceLabel: '店铺来源',\n                area: ['', ''],\n            });\n        },\n        // 生成地区列表\n        getArea: function () {\n            var provinceList = area.provinceList.map(function (province) { return ({\n                label: province.fullName,\n                value: province.fullName,\n                children: province.directCityList.map(function (city) { return ({\n                    label: city.fullName,\n                    value: city.fullName,\n                }); }),\n            }); });\n            this.setData({ provinceList: provinceList });\n        },\n        // 确认活动类型菜单\n        onChangeTypeFilter: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                actype: value,\n            });\n        },\n        //确认活动类型\n        handleTypeFilterConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { actype: this.data.actype });\n            this.createQueryParams(filter);\n            //动态修改sactypeLabel\n            var newactype = this.data.actype;\n            this.setData({\n                filter: filter,\n                actypeLabel: (function () {\n                    var actypeCount = newactype.length;\n                    if (actypeCount === 0) {\n                        return '活动类型';\n                    }\n                    else if (actypeCount === 1) {\n                        return newactype[0];\n                    }\n                    else {\n                        return \"\\u6D3B\\u52A8\\u7C7B\\u578B\" + actypeCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置活动类型\n        handleTypeFilterReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { actype: this.data.actype });\n            this.createQueryParams(filter);\n            this.setData({\n                filter: filter,\n                actypeLabel: '活动类型'\n            });\n        },\n        //活动状态菜单\n        onChangeStatusFilter: function (e) {\n            var filter = __assign(__assign({}, this.data.filter), { status: e.detail.value });\n            this.setData({ filter: filter });\n            this.createQueryParams(filter);\n        },\n        //地区选择菜单\n        onChangeAreaFilter: function (e) {\n            var value = e.detail.value;\n            this.setData({ area: value });\n        },\n        //重置\n        defaultTap: function (event) {\n            var dropdownId = event.currentTarget.dataset.id;\n            var filter = __assign(__assign({}, this.data.filter), { area: ['', ''] });\n            var newArea = this.data.area;\n            this.setData({\n                filter: filter,\n                area: ['', ''],\n                areaLabel: '地区选择'\n            });\n            this.createQueryParams(filter);\n            this.mockCloseDropDownMenu(dropdownId);\n        },\n        primaryTap: function (event) {\n            var dropdownId = event.currentTarget.dataset.id;\n            var filter = __assign(__assign({}, this.data.filter), { area: this.data.area });\n            var newArea = this.data.area;\n            console.log(newArea, 'newArea', newArea.length);\n            this.setData({\n                filter: filter,\n                areaLabel: (function () {\n                    var areaCount = newArea.length;\n                    if (areaCount === 0) {\n                        return '地区选择';\n                    }\n                    else if (areaCount === 2) {\n                        var province = newArea[0];\n                        var city = newArea[1];\n                        // 如果城市为空字符串或未定义，只显示省份\n                        if (!city) {\n                            return province;\n                        }\n                        return province + \"-\" + city;\n                    }\n                    else if (areaCount === 1) {\n                        return newArea[0];\n                    }\n                    else {\n                        return \"\\u5730\\u533A\\u9009\\u62E9\" + areaCount + \"\\uFF09\";\n                    }\n                })()\n            });\n            this.mockCloseDropDownMenu(dropdownId);\n            this.createQueryParams(filter);\n        },\n        createQueryParams: function (filter) {\n            var requestParam = filter || this.data.filter;\n            if (requestParam.area) {\n                // 从 area 数组中解构出 province 和 city\n                var _a = requestParam.area, province = _a[0], city = _a[1];\n                // 将 province 和 city 添加到 requestParam 对象中作为字符串\n                requestParam.province = province || '';\n                requestParam.city = city || '';\n                // 删除临时的 area 键\n                delete requestParam.area;\n            }\n            this.triggerEvent('menuData', requestParam); // 确认传递的格式正确\n            //改用云函数\n        },\n        //更改地区列表的树\n        mockCloseDropDownMenu: function (dropdownId) {\n            var _a;\n            var drowItemRef = this.selectComponent(\"#\" + dropdownId);\n            (_a = drowItemRef.$parent) === null || _a === void 0 ? void 0 : _a.setData({\n                activeIdx: -1,\n            });\n            drowItemRef.setData({\n                show: false,\n            });\n            drowItemRef.triggerEvent('close');\n        },\n        //点击店铺来源\n        handleSourceChange: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                source: value,\n            });\n        },\n        //确认店铺来源\n        handleSourceConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { source: this.data.source });\n            this.createQueryParams(filter);\n            //动态修改sourceLabel\n            var newsource = this.data.source;\n            this.setData({\n                filter: filter,\n                sourceLabel: (function () {\n                    var sourceCount = newsource.length;\n                    if (sourceCount === 0) {\n                        return '店铺来源';\n                    }\n                    else if (sourceCount === 1) {\n                        return newsource[0];\n                    }\n                    else {\n                        return \"\\u5E97\\u94FA\\u6765\\u6E90\" + sourceCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置店铺来源\n        handleSourceReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { source: this.data.source });\n            this.createQueryParams(filter);\n            //动态修改sourceLabel\n            var newsource = this.data.source;\n            this.setData({\n                filter: filter,\n                sourceLabel: '店铺来源'\n            });\n        },\n        //点击汉服款式属性\n        handleStyleChange: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                style: value,\n            });\n        },\n        //确认汉服款式属性\n        handleStyleConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { style: this.data.style });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newStyles = this.data.style;\n            this.setData({\n                filter: filter,\n                styleLabel: (function () {\n                    var styleCount = newStyles.length;\n                    if (styleCount === 0) {\n                        return '形制';\n                    }\n                    else if (styleCount === 1) {\n                        return newStyles[0];\n                    }\n                    else {\n                        return \"\\u5F62\\u5236\\uFF08\" + styleCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置汉服款式\n        handleStyleReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { style: this.data.style });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newStyles = this.data.style;\n            this.setData({\n                filter: filter,\n                styleLabel: (function () {\n                    var styleCount = newStyles.length;\n                    if (styleCount === 0) {\n                        return '形制';\n                    }\n                    else if (styleCount === 1) {\n                        return newStyles[0];\n                    }\n                    else {\n                        return \"\\u5F62\\u5236\\uFF08\" + styleCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //点击标签属性\n        handleTagsChange: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                tags: value,\n            });\n        },\n        //确认标签属性\n        handleTagsConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { tags: this.data.tags });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newTags = this.data.tags;\n            this.setData({\n                filter: filter,\n                tagsLabel: (function () {\n                    var tagsCount = newTags.length;\n                    if (tagsCount === 0) {\n                        return '标签（';\n                    }\n                    else if (tagsCount === 1) {\n                        return newTags[0];\n                    }\n                    else {\n                        return \"\\u6807\\u7B7E\\uFF08\" + tagsCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置标签款式\n        handleTagsReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { tags: this.data.tags });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newTags = this.data.tags;\n            this.setData({\n                filter: filter,\n                tagsLabel: '标签'\n            });\n        },\n        //点击朝代属性\n        handleDynastyChange: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                dynasty: value,\n            });\n        },\n        //确认朝代属性\n        handleDynastyConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { dynasty: this.data.dynasty });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newDynasty = this.data.dynasty;\n            this.setData({\n                filter: filter,\n                dynastyLabel: (function () {\n                    var dynastyCount = newDynasty.length;\n                    if (dynastyCount === 0) {\n                        return '朝代';\n                    }\n                    else if (dynastyCount === 1) {\n                        return newDynasty[0];\n                    }\n                    else {\n                        return \"\\u671D\\u4EE3\" + dynastyCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置朝代\n        handleDynastyReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { dynasty: this.data.dynasty });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newDynasty = this.data.dynasty;\n            this.setData({\n                filter: filter,\n                dynastyLabel: (function () {\n                    var dynastyCount = newDynasty.length;\n                    if (dynastyCount === 0) {\n                        return '朝代';\n                    }\n                    else if (dynastyCount === 1) {\n                        return newDynasty[0];\n                    }\n                    else {\n                        return \"\\u671D\\u4EE3\" + dynastyCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //点击尺码属性\n        handleSizeChange: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                size: value,\n            });\n        },\n        //确认尺码\n        handleSizeConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { size: this.data.size });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newSize = this.data.size;\n            this.setData({\n                filter: filter,\n                sizeLabel: (function () {\n                    var sizeCount = newSize.length;\n                    if (sizeCount === 0) {\n                        return '尺码';\n                    }\n                    else if (sizeCount === 1) {\n                        return newSize[0];\n                    }\n                    else {\n                        return \"\\u5C3A\\u7801\" + sizeCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置尺码\n        handleSizeReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { size: this.data.size });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newSize = this.data.size;\n            this.setData({\n                filter: filter,\n                sizeLabel: (function () {\n                    var sizeCount = newSize.length;\n                    if (sizeCount === 0) {\n                        return '尺码';\n                    }\n                    else if (sizeCount === 1) {\n                        return newSize[0];\n                    }\n                    else {\n                        return \"\\u5C3A\\u7801\" + sizeCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //点击发货时间\n        handleDeliveryTimeChange: function (event) {\n            var value = event.detail.value;\n            this.setData({\n                deliveryTime: value,\n            });\n        },\n        //确认发货时间\n        handleDeliveryTimeConfirm: function () {\n            var filter = __assign(__assign({}, this.data.filter), { deliveryTime: this.data.deliveryTime });\n            this.createQueryParams(filter);\n            //动态修改styleLabel\n            var newDeliveryTime = this.data.deliveryTime;\n            this.setData({\n                filter: filter,\n                deliveryTimeLabel: (function () {\n                    var deliveryTimeCount = newDeliveryTime.length;\n                    if (deliveryTimeCount === 0) {\n                        return '尺码';\n                    }\n                    else if (deliveryTimeCount === 1) {\n                        return newDeliveryTime[0];\n                    }\n                    else {\n                        return \"\\u5C3A\\u7801\" + deliveryTimeCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n        //重置发货时间\n        handleDeliveryTimeReset: function () {\n            var filter = __assign(__assign({}, this.data.filter), { deliveryTime: this.data.deliveryTime });\n            this.createQueryParams(filter);\n            //动态修改deliveryTimeLabel\n            var newDeliveryTime = this.data.deliveryTime;\n            this.setData({\n                filter: filter,\n                deliveryTimeLabel: (function () {\n                    var deliveryTimeCount = newDeliveryTime.length;\n                    if (deliveryTimeCount === 0) {\n                        return '发货时间';\n                    }\n                    else if (deliveryTimeCount === 1) {\n                        return newDeliveryTime[0];\n                    }\n                    else {\n                        return \"\\u53D1\\u8D27\\u65F6\\u95F4\" + deliveryTimeCount + \"\\uFF09\";\n                    }\n                })()\n            });\n        },\n    },\n});\n"],"names":[],"sourceRoot":""}