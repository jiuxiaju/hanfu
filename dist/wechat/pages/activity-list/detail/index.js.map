{"version":3,"file":"pages/activity-list/detail/index.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./pages/activity-list/detail/index.ts"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { aPage } from '@ali/mor-core';\nimport { get } from '../../../services';\nimport dayjs from 'dayjs';\n// 获取全局 app 实例\nvar app = getApp();\naPage({\n    data: {\n        infoList: [],\n        showOverlay: false,\n        essentialInfo: [],\n        sponsor: '',\n        time: '',\n        address: '',\n    },\n    onLoad: function (options) {\n        this.getCurrentPagePathWithArgs();\n        var activityId = options.activityId;\n        if (activityId) {\n            this.getActivityDetail(activityId);\n        }\n        ;\n    },\n    getCurrentPagePathWithArgs: function () {\n        var pages = getCurrentPages(); // 获取加载的页面\n        var currentPage = pages[pages.length - 1]; // 获取当前页面的对象\n        var url = \"/\" + currentPage.route; // 当前页面url\n        // 获取页面参数\n        var options = currentPage.options;\n        var queryParameters = Object.keys(options)\n            .map(function (key) { return key + \"=\" + options[key]; })\n            .join('&');\n        var aa = url + \"?\" + queryParameters;\n        console.log('aa', aa);\n        return url + \"?\" + queryParameters;\n    },\n    showOverlay: function () {\n        var _this = this;\n        var _a, _b, _c;\n        // 假设infoList是已经在data中或作为实例属性定义好的\n        var infoList = this.data.infoList; // 或使用 this.infoList 如果infoList是实例属性\n        // 从infoList数组中获取需要的数据\n        var sponsor = ((_a = infoList.find(function (item) { return item.key === 'sponsor'; })) === null || _a === void 0 ? void 0 : _a.value) || '未知主办方';\n        var time = ((_b = infoList.find(function (item) { return item.key === 'time'; })) === null || _b === void 0 ? void 0 : _b.value) || '未知时间';\n        var address = ((_c = infoList.find(function (item) { return item.key === 'address'; })) === null || _c === void 0 ? void 0 : _c.value) || '未知地址';\n        // 设置获取到的值以及显示覆盖层\n        this.setData({\n            sponsor: sponsor,\n            time: time,\n            address: address,\n            showOverlay: true, // 显示覆盖层\n        });\n        console.log(time),\n            // 设置3秒后自动隐藏覆盖层\n            setTimeout(function () {\n                _this.setData({\n                    showOverlay: false, // 隐藏覆盖层\n                });\n            }, 40000); // 3000毫秒后执行\n    },\n    // 转发至好友\n    onShareAppMessage: function () {\n        var app = getApp(); // 获取全局应用实例\n        var promise = new Promise(function (resolve) {\n            app.generateShareInfo().then(function (shareInfo) {\n                // 在这里处理生成的分享信息\n                resolve(shareInfo);\n            });\n        });\n        return {\n            title: '九霞裾',\n            path: '/pages/home',\n            promise: promise\n        };\n    },\n    //转发到朋友圈\n    onShareTimeline: function () {\n        return {\n            title: '快来看看'\n        };\n    },\n    getActivityDetail: function (activityId) {\n        var _this = this;\n        console.log('我开始了1');\n        get('/activity/detail', { activityId: activityId }).then(function (res) {\n            console.log('我开始了1');\n            var _a = res.data, data = _a === void 0 ? {} : _a, success = res.success;\n            if (data && success) {\n                var acData = _this.handleDetailData(data);\n                console.log(\"🚀 ~ file: detail.ts:28 ~ get ~ detail:\", acData);\n                _this.setData(__assign({}, acData));\n            }\n        });\n    },\n    handleTap: function () {\n        this.showOverlay(); // 先调用 showOverlay\n        //希望在点击的时候，海报先显示出来，然后保存。\n    },\n    handleDetailData: function (acData) {\n        var startTime = acData.startTime, emdTime = acData.emdTime, address = acData.address, sponsor = acData.sponsor, tele = acData.tele;\n        var startTimeFormat = dayjs(startTime).format('YYYY-MM-DD HH:mm');\n        var endTimeFormat = dayjs(emdTime).format('YYYY-MM-DD HH:mm');\n        var infoList = [\n            {\n                value: sponsor,\n                label: '主办方',\n                key: 'sponsor',\n            },\n            {\n                value: startTimeFormat + \"-\" + endTimeFormat,\n                label: '活动时间',\n                key: 'time',\n            },\n            {\n                value: address,\n                label: '活动地址',\n                key: 'address',\n            },\n            {\n                value: tele,\n                label: '联系方式',\n                key: 'tele',\n            },\n        ];\n        return Object.assign(acData, {\n            detail: app.convertRichText(acData.detail),\n            infoList: infoList,\n        });\n    },\n});\n"],"names":[],"sourceRoot":""}