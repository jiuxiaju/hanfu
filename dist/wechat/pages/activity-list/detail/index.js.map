{"version":3,"file":"pages/activity-list/detail/index.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack:///./pages/activity-list/detail/index.ts"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { aPage } from '@ali/mor-core';\nimport { get } from '../../../services';\nimport dayjs from 'dayjs';\n// è·å–å…¨å±€ app å®ä¾‹\nvar app = getApp();\naPage({\n    data: {\n        infoList: [],\n        showOverlay: false,\n        essentialInfo: [],\n        sponsor: '',\n        time: '',\n        address: '',\n    },\n    onLoad: function (options) {\n        this.getCurrentPagePathWithArgs();\n        var activityId = options.activityId;\n        if (activityId) {\n            this.getActivityDetail(activityId);\n        }\n        ;\n    },\n    getCurrentPagePathWithArgs: function () {\n        var pages = getCurrentPages(); // è·å–åŠ è½½çš„é¡µé¢\n        var currentPage = pages[pages.length - 1]; // è·å–å½“å‰é¡µé¢çš„å¯¹è±¡\n        var url = \"/\" + currentPage.route; // å½“å‰é¡µé¢url\n        // è·å–é¡µé¢å‚æ•°\n        var options = currentPage.options;\n        var queryParameters = Object.keys(options)\n            .map(function (key) { return key + \"=\" + options[key]; })\n            .join('&');\n        var aa = url + \"?\" + queryParameters;\n        console.log('aa', aa);\n        return url + \"?\" + queryParameters;\n    },\n    showOverlay: function () {\n        var _this = this;\n        var _a, _b, _c;\n        // å‡è®¾infoListæ˜¯å·²ç»åœ¨dataä¸­æˆ–ä½œä¸ºå®ä¾‹å±æ€§å®šä¹‰å¥½çš„\n        var infoList = this.data.infoList; // æˆ–ä½¿ç”¨ this.infoList å¦‚æœinfoListæ˜¯å®ä¾‹å±æ€§\n        // ä»infoListæ•°ç»„ä¸­è·å–éœ€è¦çš„æ•°æ®\n        var sponsor = ((_a = infoList.find(function (item) { return item.key === 'sponsor'; })) === null || _a === void 0 ? void 0 : _a.value) || 'æœªçŸ¥ä¸»åŠæ–¹';\n        var time = ((_b = infoList.find(function (item) { return item.key === 'time'; })) === null || _b === void 0 ? void 0 : _b.value) || 'æœªçŸ¥æ—¶é—´';\n        var address = ((_c = infoList.find(function (item) { return item.key === 'address'; })) === null || _c === void 0 ? void 0 : _c.value) || 'æœªçŸ¥åœ°å€';\n        // è®¾ç½®è·å–åˆ°çš„å€¼ä»¥åŠæ˜¾ç¤ºè¦†ç›–å±‚\n        this.setData({\n            sponsor: sponsor,\n            time: time,\n            address: address,\n            showOverlay: true, // æ˜¾ç¤ºè¦†ç›–å±‚\n        });\n        console.log(time),\n            // è®¾ç½®3ç§’åè‡ªåŠ¨éšè—è¦†ç›–å±‚\n            setTimeout(function () {\n                _this.setData({\n                    showOverlay: false, // éšè—è¦†ç›–å±‚\n                });\n            }, 40000); // 3000æ¯«ç§’åæ‰§è¡Œ\n    },\n    // è½¬å‘è‡³å¥½å‹\n    onShareAppMessage: function () {\n        var app = getApp(); // è·å–å…¨å±€åº”ç”¨å®ä¾‹\n        var promise = new Promise(function (resolve) {\n            app.generateShareInfo().then(function (shareInfo) {\n                // åœ¨è¿™é‡Œå¤„ç†ç”Ÿæˆçš„åˆ†äº«ä¿¡æ¯\n                resolve(shareInfo);\n            });\n        });\n        return {\n            title: 'ä¹éœè£¾',\n            path: '/pages/home',\n            promise: promise\n        };\n    },\n    //è½¬å‘åˆ°æœ‹å‹åœˆ\n    onShareTimeline: function () {\n        return {\n            title: 'å¿«æ¥çœ‹çœ‹'\n        };\n    },\n    getActivityDetail: function (activityId) {\n        var _this = this;\n        console.log('æˆ‘å¼€å§‹äº†1');\n        get('/activity/detail', { activityId: activityId }).then(function (res) {\n            console.log('æˆ‘å¼€å§‹äº†1');\n            var _a = res.data, data = _a === void 0 ? {} : _a, success = res.success;\n            if (data && success) {\n                var acData = _this.handleDetailData(data);\n                console.log(\"ğŸš€ ~ file: detail.ts:28 ~ get ~ detail:\", acData);\n                _this.setData(__assign({}, acData));\n            }\n        });\n    },\n    handleTap: function () {\n        this.showOverlay(); // å…ˆè°ƒç”¨ showOverlay\n        //å¸Œæœ›åœ¨ç‚¹å‡»çš„æ—¶å€™ï¼Œæµ·æŠ¥å…ˆæ˜¾ç¤ºå‡ºæ¥ï¼Œç„¶åä¿å­˜ã€‚\n    },\n    handleDetailData: function (acData) {\n        var startTime = acData.startTime, emdTime = acData.emdTime, address = acData.address, sponsor = acData.sponsor, tele = acData.tele;\n        var startTimeFormat = dayjs(startTime).format('YYYY-MM-DD HH:mm');\n        var endTimeFormat = dayjs(emdTime).format('YYYY-MM-DD HH:mm');\n        var infoList = [\n            {\n                value: sponsor,\n                label: 'ä¸»åŠæ–¹',\n                key: 'sponsor',\n            },\n            {\n                value: startTimeFormat + \"-\" + endTimeFormat,\n                label: 'æ´»åŠ¨æ—¶é—´',\n                key: 'time',\n            },\n            {\n                value: address,\n                label: 'æ´»åŠ¨åœ°å€',\n                key: 'address',\n            },\n            {\n                value: tele,\n                label: 'è”ç³»æ–¹å¼',\n                key: 'tele',\n            },\n        ];\n        return Object.assign(acData, {\n            detail: app.convertRichText(acData.detail),\n            infoList: infoList,\n        });\n    },\n});\n"],"names":[],"sourceRoot":""}